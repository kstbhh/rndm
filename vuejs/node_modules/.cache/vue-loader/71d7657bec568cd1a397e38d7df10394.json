{"remainingRequest":"C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\src\\views\\page\\GoVideo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\src\\views\\page\\GoVideo.vue","mtime":1600781654000},{"path":"C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1598802962590},{"path":"C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1598802962851},{"path":"C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\node_modules\\babel-loader\\lib\\index.js","mtime":1590152956206},{"path":"C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1598802962590},{"path":"C:\\Users\\Souvik\\Desktop\\gindex-v4-8.2.4\\vuejs\\node_modules\\vue-loader\\lib\\index.js","mtime":1598802986487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFwaVJvdXRlcywgYmFja2VuZEhlYWRlcnMgfSBmcm9tICJAL3V0aWxzL2JhY2tlbmRVdGlscyI7CmltcG9ydCB7IGdldEl0ZW0gfSBmcm9tICdAdXRpbHMvZW5jcnlwdFV0aWxzJzsKaW1wb3J0IHsKICBpbml0aWFsaXplVXNlciwKICBnZXRnZHMsCiAgc2Nyb2xsVG8sCn0gZnJvbSAiQHV0aWxzL2xvY2FsVXRpbHMiOwppbXBvcnQgewogIGZvcm1hdERhdGUsCiAgZm9ybWF0RmlsZVNpemUsCiAgY2hlY2tvdXRQYXRoLAogIGNoZWNrVmlldywKfSBmcm9tICJAdXRpbHMvQWNyb3VVdGlsIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAndnVlLWxvYWRpbmctb3ZlcmxheSc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGRlY29kZTY0IH0gZnJvbSAiQHV0aWxzL0Fjcm91VXRpbCI7CmltcG9ydCB7IHNydDJ2dHQsIHBsYXllcnMgfSBmcm9tICJAdXRpbHMvcGxheVV0aWxzIjsKaW1wb3J0IG5vdGlmeSBmcm9tICJAL2NvbXBvbmVudHMvbm90aWZpY2F0aW9uIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmcsCiAgfSwKICBtZXRhSW5mbygpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiB0aGlzLm1ldGF0aXRsZSwKICAgICAgdGl0bGVUZW1wbGF0ZTogKHRpdGxlQ2h1bmspID0+IHsKICAgICAgICBpZih0aXRsZUNodW5rICYmIHRoaXMuc2l0ZU5hbWUpewogICAgICAgICAgcmV0dXJuIHRpdGxlQ2h1bmsgPyBgJHt0aXRsZUNodW5rfSB8ICR7dGhpcy5zaXRlTmFtZX1gIDogYCR7dGhpcy5zaXRlTmFtZX1gOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gIkxvYWRpbmcuLi4iCiAgICAgICAgfQogICAgICB9LAogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBtZXRhdGl0bGU6ICIiLAogICAgICBhcGl1cmw6ICIiLAogICAgICBleHRlcm5hbFVybDogIiIsCiAgICAgIGRvd25sb2FkVXJsOiAiIiwKICAgICAgdmlkZW91cmw6ICIiLAogICAgICBwb3N0ZXI6ICIiLAogICAgICB3aW5kb3dXaWR0aDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgIHNjcmVlbldpZHRoOiBzY3JlZW4ud2lkdGgsCiAgICAgIG1haW5Mb2FkOiBmYWxzZSwKICAgICAgZnVsbHBhZ2U6IHRydWUsCiAgICAgIGlzbW9iaWxlOiBmYWxzZSwKICAgICAgdXNlcjoge30sCiAgICAgIHRva2VuOiB7fSwKICAgICAgc2VhcmNoQmFyVGVybTogIiIsCiAgICAgIHNlYXJjaEJhcmZhSWNvbjogImZhYiBmYS1zZWFyY2hlbmdpbiIsCiAgICAgIHZpZGVva2V5OiAwLAogICAgICBtZWRpYVRva2VuOiAiIiwKICAgICAgbW9kYWw6IGZhbHNlLAogICAgICBpbmZpbml0ZUlkOiArbmV3IERhdGUoKSwKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgc3VidXJsOiBbXSwKICAgICAgc3ViOiBmYWxzZSwKICAgICAgZGVzYzogZmFsc2UsCiAgICAgIHN1Yk1vZGFsOiBmYWxzZSwKICAgICAgc3ViQnV0TG9hZDogZmFsc2UsCiAgICAgIHN1YnJpcHVybDogIiIsCiAgICAgIHZpZGVvRGF0YToge30sCiAgICAgIHBhcnNlZERhdGE6IHt9LAogICAgICBjdXJyVmRJbmZvOiB7fSwKICAgICAgcHJldlJvdXRlOiBnZXRJdGVtKCJwcmV2IiksCiAgICAgIGRhdGFQcmVzZW50OiBmYWxzZSwKICAgICAgaW5mb1BhbmVsOiB0cnVlLAogICAgICBpbmZvQ2hhbmdlOiAwLAogICAgICBjdXN0c3VibGFiZWw6ICIiLAogICAgICBzdWNjZXNzTWVzc2FnZTogZmFsc2UsCiAgICAgIHJlc3VsdG1lc3NhZ2U6ICIiLAogICAgICBwbGF5aWNvbjogImZhcyBmYS1zcGlubmVyIGZhLXB1bHNlIiwKICAgICAgcGxheXRleHQ6ICJMb2FkaW5nIFN0dWZmcy4uLi4iLAogICAgICB2aWRlb25hbWU6ICIiLAogICAgICB2aWRlb21vZGFsOiBmYWxzZSwKICAgICAgbW9kYWxWaWRlbzogIiIsCiAgICAgIGxvYWRJbWFnZTogIiIsCiAgICAgIGdkczogW10sCiAgICAgIGN1cnJnZDoge30sCiAgICAgIHBhZ2U6IHsKICAgICAgICBwYWdlX3Rva2VuOiBudWxsLAogICAgICAgIHBhZ2VfaW5kZXg6IDAsCiAgICAgIH0sCiAgICAgIGZpbGVzOiBbXSwKICAgICAgcGxheWVyOiB7fSwKICAgICAgdmlld2VyOiBmYWxzZSwKICAgICAgaWNvbjogewogICAgICAgICJ2aWRlby9tcDQiOiAiaWNvbi1tcCIsCiAgICAgICAgInZpZGVvL3gtbWF0cm9za2EiOiAiaWNvbi1ta3YiLAogICAgICAgICJ2aWRlby94LW1zdmlkZW8iOiAiaWNvbi1hdmkiLAogICAgICAgICJ2aWRlby93ZWJtIjogImljb24td2VibSIsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5maW5pdGVIYW5kbGVyKCRzdGF0ZSkgewogICAgICAvLyBUaGUgZmlyc3QgdGltZSB5b3UgZW50ZXIgdGhlIHBhZ2UgZG9lcyBub3QgZXhlY3V0ZSB0aGUgc2Nyb2xsIGV2ZW50CiAgICAgIGlmICghdGhpcy5wYWdlLnBhZ2VfdG9rZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5wYWdlLnBhZ2VfdG9rZW4rKzsKICAgICAgdGhpcy5yZW5kZXIoJHN0YXRlKTsKICAgIH0sCiAgICBpbml0aWFsaXplVXNlcigpewogICAgICB2YXIgdXNlckRhdGEgPSBpbml0aWFsaXplVXNlcigpOwogICAgICBpZih1c2VyRGF0YS5pc1RoZXJlKXsKICAgICAgICBpZih1c2VyRGF0YS50eXBlID09ICJoeWJyaWQiKXsKICAgICAgICAgIHRoaXMudXNlciA9IHVzZXJEYXRhLmRhdGEudXNlcjsKICAgICAgICAgIHRoaXMubG9nZ2VkID0gdXNlckRhdGEuZGF0YS5sb2dnZWQ7CiAgICAgICAgfSBlbHNlIGlmKHVzZXJEYXRhLnR5cGUgPT0gIm5vcm1hbCIpewogICAgICAgICAgdGhpcy51c2VyID0gdXNlckRhdGEuZGF0YS51c2VyOwogICAgICAgICAgdGhpcy50b2tlbiA9IHVzZXJEYXRhLmRhdGEudG9rZW47CiAgICAgICAgICB0aGlzLmxvZ2dlZCA9IHVzZXJEYXRhLmRhdGEubG9nZ2VkOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxvZ2dlZCA9IHVzZXJEYXRhLmRhdGEubG9nZ2VkOwogICAgICB9CiAgICAgIHRoaXMuZ2V0VmlkZW91cmwoKTsKICAgIH0sCiAgICByZW5kZXIoJHN0YXRlKSB7CiAgICAgIHRoaXMucGxheWVyID0gdGhpcy4kcmVmcy5wbHlyLnBsYXllcgogICAgICB0aGlzLm1haW5Mb2FkID0gdHJ1ZTsKICAgICAgdGhpcy5pbml0aWFsaXplVXNlcigpOwogICAgICB0aGlzLmdldEZpbGVzKCRzdGF0ZSk7CiAgICAgIHRoaXMuZ2V0VmlkZW9EYXRhKGRlY29kZVVSSUNvbXBvbmVudCh0aGlzLnZpZGVvbmFtZS5zcGxpdCgnLicpLnNsaWNlKDAsLTEpLmpvaW4oJy4nKSkpOwogICAgICB0aGlzLmNoZWNrTW9iaWxlKCk7CiAgICAgIHRoaXMubWFpbkxvYWQgPSBmYWxzZTsKICAgICAgLy8gaWYoIXRoaXMuaW5mb1BhbmVsKSB0aGlzLnBsYXllci5wbGF5KCk7CiAgICB9LAogICAgZ2V0RmlsZXMoJHN0YXRlKXsKICAgICAgdGhpcy5tZXRhdGl0bGUgPSAiTG9hZGluZy4uLiI7CiAgICAgIHZhciBwYXRoID0gdGhpcy51cmwuc3BsaXQodGhpcy51cmwuc3BsaXQoJy8nKS5wb3AoKSlbMF07CiAgICAgIHZhciBwYXNzd29yZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwYXNzd29yZCIgKyBwYXRoKTsKICAgICAgdmFyIHAgPSB7CiAgICAgICAgcTogIiIsCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkIHx8IG51bGwsCiAgICAgICAgLi4udGhpcy5wYWdlLAogICAgICB9OwogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLnBvc3QocGF0aCwgcCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB2YXIgYm9keSA9IHJlcy5kYXRhOwogICAgICAgICAgaWYgKGJvZHkpIHsKICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSByZXNwb25zZSBzdGF0dXMKICAgICAgICAgICAgaWYgKGJvZHkuZXJyb3IgJiYgYm9keS5lcnJvci5jb2RlID09ICI0MDEiKSB7CiAgICAgICAgICAgICAgdGhpcy5jaGVja1Bhc3N3b3JkKHBhdGgpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZGF0YSA9IGJvZHkuZGF0YTsKICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMucGFnZSA9IHsKICAgICAgICAgICAgICBwYWdlX3Rva2VuOiBib2R5Lm5leHRQYWdlVG9rZW4sCiAgICAgICAgICAgICAgcGFnZV9pbmRleDogYm9keS5jdXJQYWdlSW5kZXgsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmICgkc3RhdGUpIHsKICAgICAgICAgICAgICB0aGlzLm9yaWdpbmFsRmlsZXMucHVzaCguLi50aGlzLmJ1aWxkRmlsZXMoZGF0YS5maWxlcykpOwogICAgICAgICAgICAgIHRoaXMuZmlsZXMucHVzaCh0aGlzLmdldEZpbHRlcmVkRmlsZXMoLi4udGhpcy5idWlsZEZpbGVzKGRhdGEuZmlsZXMpKSk7CiAgICAgICAgICAgICAgdGhpcy5jdXJyVmRJbmZvID0gdGhpcy5nZXRDdXJyVmRJbmZvKC4uLnRoaXMuYnVpbGRGaWxlcyhkYXRhLmZpbGVzKSlbMF07CiAgICAgICAgICAgICAgdGhpcy5jaGVja1N1YnVybCgpOwogICAgICAgICAgICAgIHRoaXMuZ2V0UG9zdGVyKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEZpbGVzID0gdGhpcy5idWlsZEZpbGVzKGRhdGEuZmlsZXMpCiAgICAgICAgICAgICAgdGhpcy5maWxlcyA9IHRoaXMuZ2V0RmlsdGVyZWRGaWxlcyh0aGlzLmJ1aWxkRmlsZXMoZGF0YS5maWxlcykpOwogICAgICAgICAgICAgIHRoaXMuY2hlY2tTdWJ1cmwoKTsKICAgICAgICAgICAgICB0aGlzLmN1cnJWZEluZm8gPSB0aGlzLmdldEN1cnJWZEluZm8odGhpcy5idWlsZEZpbGVzKGRhdGEuZmlsZXMpKVswXTsKICAgICAgICAgICAgICB0aGlzLmdldFBvc3RlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYm9keS5uZXh0UGFnZVRva2VuKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuaW5maW5pdGUuc3RhdGVDaGFuZ2VyLmxvYWRlZCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5pbmZpbml0ZS5zdGF0ZUNoYW5nZXIuY29tcGxldGUoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0pOwogICAgfSwKICAgIGJ1aWxkRmlsZXMoZmlsZXMpIHsKICAgICAgdGhpcy5tZXRhdGl0bGUgPSBkZWNvZGVVUklDb21wb25lbnQodGhpcy51cmwuc3BsaXQoJy8nKS5wb3AoKS5zcGxpdCgnLicpLnNsaWNlKDAsLTEpLmpvaW4oJy4nKSk7CiAgICAgIHZhciBwYXRoID0gdGhpcy51cmwuc3BsaXQodGhpcy51cmwuc3BsaXQoJy8nKS5wb3AoKSlbMF07CiAgICAgIHJldHVybiAhZmlsZXMKICAgICAgICA/IFtdCiAgICAgICAgOiBmaWxlcwogICAgICAgICAgICAubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgdmFyIHAgPSBwYXRoICsgY2hlY2tvdXRQYXRoKGl0ZW0ubmFtZSwgaXRlbSk7CiAgICAgICAgICAgICAgbGV0IGlzRm9sZGVyID0KICAgICAgICAgICAgICAgIGl0ZW0ubWltZVR5cGUgPT09ICJhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyIjsKICAgICAgICAgICAgICBsZXQgc2l6ZSA9IGlzRm9sZGVyID8gIi0iIDogZm9ybWF0RmlsZVNpemUoaXRlbS5zaXplKTsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcGF0aDogcCwKICAgICAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgICAgICBtb2RpZmllZFRpbWU6IGZvcm1hdERhdGUoaXRlbS5tb2RpZmllZFRpbWUpLAogICAgICAgICAgICAgICAgc2l6ZTogc2l6ZSwKICAgICAgICAgICAgICAgIGlzRm9sZGVyOiBpc0ZvbGRlciwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KQogICAgfSwKICAgIGNoZWNrUGFzc3dvcmQocGF0aCkgewogICAgICB2YXIgcGFzcyA9IHByb21wdCh0aGlzLiR0KCJsaXN0LmF1dGgiKSwgIiIpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicGFzc3dvcmQiICsgcGF0aCwgcGFzcyk7CiAgICAgIGlmIChwYXNzICE9IG51bGwgJiYgcGFzcyAhPSAiIikgewogICAgICAgIHRoaXMucmVuZGVyKHBhdGgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja01vYmlsZSgpIHsKICAgICAgdmFyIHdpZHRoID0gdGhpcy53aW5kb3dXaWR0aCA+IDAgPyB0aGlzLndpbmRvd1dpZHRoIDogdGhpcy5zY3JlZW5XaWR0aDsKICAgICAgaWYod2lkdGggPiA5NjYpewogICAgICAgIHRoaXMuaXNtb2JpbGUgPSBmYWxzZQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNtb2JpbGUgPSB0cnVlCiAgICAgIH0KICAgIH0sCiAgICBjaGVja1N1YnVybCgpIHsKICAgICAgY29uc3QgdG9rcyA9IHRoaXMudmlkZW9uYW1lLnNwbGl0KCcuJyk7CiAgICAgIGNvbnN0IHBhdGhTYW5zRXh0ID0gdG9rcy5zbGljZSgwLCAtMSkuam9pbignLicpOwogICAgICBjb25zdCByZWdleHQgPSBuZXcgUmVnRXhwKGAoPzxuYW1lPiR7cGF0aFNhbnNFeHR9KWArJ1xcLig/PGxhYmVsPltcXHNcXFNcXERdKylcXC4oPzxmb3JtYXQ+c3J0fHZ0dCknKTsKICAgICAgcmV0dXJuIHRoaXMub3JpZ2luYWxGaWxlcy5mb3JFYWNoKGFzeW5jIChpdGVtKSA9PiB7CiAgICAgICAgIGlmKGl0ZW0ubmFtZSA9PSBwYXRoU2Fuc0V4dCArICIuc3J0IiB8fCBpdGVtLm5hbWUgPT0gcGF0aFNhbnNFeHQgKyAiLnZ0dCIpewogICAgICAgICAgIGxldCB1cmwgPSBpdGVtLnBhdGgrIj9wbGF5ZXI9aW50ZXJuYWwiKyImdG9rZW49Iit0aGlzLnRva2VuLnRva2VuKyImZW1haWw9Iit0aGlzLnVzZXIuZW1haWw7CiAgICAgICAgICAgbGV0IGJsb2IgPSBhd2FpdCB0aGlzLmdldFNydEZpbGUodXJsKTsKICAgICAgICAgICBpZihibG9iLnN1Y2Nlc3MpewogICAgICAgICAgICAgdGhpcy5zdWIgPSB0cnVlOwogICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgdGl0bGU6ICJTdWJ0aXRsZSBMb2FkZWQiLAogICAgICAgICAgICAgICBtZXNzYWdlOiAiRG9uZSIsCiAgICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICB0aGlzLnN1YnVybCA9IHRoaXMuc3VidXJsLmNvbmNhdChbe3VybDogYmxvYi5ibG9iRGF0YSwgbGFiZWw6ICJEZWZhdWx0In1dKTsKICAgICAgICAgICAgIHRoaXMudmlkZW9rZXkgPSB0aGlzLnZpZGVva2V5ICsgMQogICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICB0aGlzLnN1YiA9IGZhbHNlOwogICAgICAgICAgICAgdGhpcy5zdWJ1cmwgPSBbXTsKICAgICAgICAgICB9CiAgICAgICAgIH0gZWxzZSBpZihyZWdleHQudGVzdChpdGVtLm5hbWUpKXsKICAgICAgICAgICBsZXQgZ3JvdXBzID0gcmVnZXh0LmV4ZWMoaXRlbS5uYW1lKS5ncm91cHM7CiAgICAgICAgICAgbGV0IHVybCA9IGl0ZW0ucGF0aCsiP3BsYXllcj1pbnRlcm5hbCIrIiZ0b2tlbj0iK3RoaXMudG9rZW4udG9rZW4rIiZlbWFpbD0iK3RoaXMudXNlci5lbWFpbDsKICAgICAgICAgICBsZXQgYmxvYiA9IGF3YWl0IHRoaXMuZ2V0U3J0RmlsZSh1cmwpOwogICAgICAgICAgIGlmKGJsb2Iuc3VjY2Vzcyl7CiAgICAgICAgICAgICB0aGlzLnN1YiA9IHRydWU7CiAgICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICB0aXRsZTogIlN1YnRpdGxlIExvYWRlZCIsCiAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJEb25lIiwKICAgICAgICAgICAgICAgdHlwZTogImluZm8iLAogICAgICAgICAgICAgfSkKICAgICAgICAgICAgIHRoaXMuc3VidXJsID0gdGhpcy5zdWJ1cmwuY29uY2F0KFt7dXJsOiBibG9iLmJsb2JEYXRhLCBsYWJlbDogZ3JvdXBzLmxhYmVsfV0pOwogICAgICAgICAgICAgdGhpcy52aWRlb2tleSA9IHRoaXMudmlkZW9rZXkgKyAxCiAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgIHRoaXMuc3ViID0gZmFsc2U7CiAgICAgICAgICAgICB0aGlzLnN1YnVybCA9IFtdOwogICAgICAgICAgIH0KICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICB0aGlzLnN1YiA9IGZhbHNlOwogICAgICAgICAgIHRoaXMuc3VidXJsID0gW107CiAgICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0VmlkZW9EYXRhKHRpdGxlKXsKICAgICAgaWYodGhpcy5wcmV2Um91dGUgPT0gInZpZGVvIil7CiAgICAgICAgdGhpcy5kYXRhUHJlc2VudCA9IGZhbHNlOwogICAgICAgIHRoaXMuaW5mb1BhbmVsID0gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy4kYmFja2VuZC5wb3N0KGFwaVJvdXRlcy5nZXRNZWRpYURhdGEsIHsKICAgICAgICBlbWFpbDogdGhpcy51c2VyLmVtYWlsLAogICAgICAgIHRpdGxlOiB0aXRsZQogICAgICB9LCBiYWNrZW5kSGVhZGVycyh0aGlzLnRva2VuLnRva2VuKSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5hdXRoICYmIHJlc3BvbnNlLmRhdGEucmVnaXN0ZXJlZCAmJiByZXNwb25zZS5kYXRhLmRhdGEpewogICAgICAgICAgdGhpcy5kYXRhUHJlc2VudCA9IHRydWU7CiAgICAgICAgICB0aGlzLnZpZGVvRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0OwogICAgICAgICAgdGhpcy5wYXJzZWREYXRhID0gcmVzcG9uc2UuZGF0YS5wYXJzZWREYXRhOwogICAgICAgICAgaWYoIXRoaXMuaW5mb1BhbmVsKSB0aGlzLnBsYXllci5wbGF5KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucGxheWVyLnBsYXkoKTsKICAgICAgICAgIHRoaXMuZGF0YVByZXNlbnQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuaW5mb1BhbmVsID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGFzeW5jIGdldFNydEZpbGUodXJsKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc3J0ID0gYXdhaXQgdGhpcy4kYmFja2VuZC5nZXQodXJsKTsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3NydDJ2dHQoc3J0LmRhdGEpXSwgeyB0eXBlOiAndGV4dC92dHQnIH0pCiAgICAgICAgdmFyIHNydEJsb2IgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBibG9iRGF0YTogc3J0QmxvYiwKICAgICAgICAgIHN1Y2Nlc3M6IHRydWUKICAgICAgICB9OwogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgYmxvYkRhdGE6IG51bGwsCiAgICAgICAgICBzdWNjZXNzOiBmYWxzZQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBsb2FkQ3VzdG9tU3ViKHVybCwgbGFiZWwpIHsKICAgICAgdGhpcy5zdWJCdXRMb2FkID0gdHJ1ZTsKICAgICAgY29uc3QgdXJsUmVnZXggPSAvKGh0dHA6XC9cL3xodHRwczpcL1wvW1xzXFNdKykvOwogICAgICBpZih1cmxSZWdleC50ZXN0KHVybCkpewogICAgICAgIGxldCBibG9iID0gYXdhaXQgdGhpcy5nZXRTcnRGaWxlKHVybCk7CiAgICAgICAgaWYoYmxvYi5zdWNjZXNzKXsKICAgICAgICAgIHRoaXMuc3VidXJsID0gdGhpcy5zdWJ1cmwuY29uY2F0KFt7dXJsOiBibG9iLmJsb2JEYXRhLCBsYWJlbDogbGFiZWx9XSk7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogIlN1YnRpdGxlIExvYWRlZCIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJEb25lIiwKICAgICAgICAgICAgdHlwZTogImluZm8iLAogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMudmlkZW9rZXkgPSB0aGlzLnZpZGVva2V5ICsgMQogICAgICAgICAgdGhpcy5zdWNjZXNzTWVzc2FnZSA9IHRydWU7CiAgICAgICAgICB0aGlzLnJlc3VsdG1lc3NhZ2UgPSAiU3VidGl0bGUgTG9hZGVkIFN1Y2Nlc3NmdWxseSAhIgogICAgICAgICAgdGhpcy5zdWJCdXRMb2FkID0gZmFsc2U7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zdWJNb2RhbCA9IGZhbHNlOwogICAgICAgICAgfSwgMzAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zdWNjZXNzTWVzc2FnZSA9IHRydWU7CiAgICAgICAgICB0aGlzLnJlc3VsdG1lc3NhZ2UgPSAiRXJyb3IgTG9hZGluZyB0aGUgU3VidGl0bGUuIFBsZWFzZSBDaGVjayBZb3VyIExpbmsuIgogICAgICAgICAgdGhpcy5zdWJCdXRMb2FkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBnZXRVcmwgPSAiLyIrdGhpcy5jdXJyZ2QuaWQrIjovIit1cmwrIj9wbGF5ZXI9aW50ZXJuYWwiKyImdG9rZW49Iit0aGlzLnRva2VuLnRva2VuKyImZW1haWw9Iit0aGlzLnVzZXIuZW1haWw7CiAgICAgICAgbGV0IGJsb2IgPSBhd2FpdCB0aGlzLmdldFNydEZpbGUoZ2V0VXJsKTsKICAgICAgICBpZihibG9iLnN1Y2Nlc3MpewogICAgICAgICAgdGhpcy5zdWJ1cmwgPSB0aGlzLnN1YnVybC5jb25jYXQoW3t1cmw6IGJsb2IuYmxvYkRhdGEsIGxhYmVsOiBsYWJlbH1dKTsKICAgICAgICAgIHRoaXMudmlkZW9rZXkgPSB0aGlzLnZpZGVva2V5ICsgMQogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICJTdWJ0aXRsZSBMb2FkZWQiLAogICAgICAgICAgICBtZXNzYWdlOiAiRG9uZSIsCiAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLnN1Y2Nlc3NNZXNzYWdlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMucmVzdWx0bWVzc2FnZSA9ICJTdWJ0aXRsZSBMb2FkZWQgU3VjY2Vzc2Z1bGx5ICEiCiAgICAgICAgICB0aGlzLnN1YkJ1dExvYWQgPSBmYWxzZTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnN1Yk1vZGFsID0gZmFsc2U7CiAgICAgICAgICB9LCAzMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnN1Y2Nlc3NNZXNzYWdlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMucmVzdWx0bWVzc2FnZSA9ICJFcnJvciBMb2FkaW5nIHRoZSBTdWJ0aXRsZS4gUGxlYXNlIENoZWNrIFlvdXIgTGluay4iCiAgICAgICAgICB0aGlzLnN1YkJ1dExvYWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBsb2FkRmx2KG9wdGlvbnMpIHsKICAgICAgaW1wb3J0KCJAL3BsdWdpbi92aWRlby1wbHVnaW5zL2ZsdiIpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHZhciBGbHYgPSByZXMuZGVmYXVsdDsKICAgICAgICBGbHYob3B0aW9ucyk7CiAgICAgIH0pOwogICAgfSwKICAgIHRodW0odXJsKSB7CiAgICAgIHJldHVybiB1cmwgPyBgLyR7dGhpcy4kcm91dGUucGFyYW1zLmlkfTp2aWV3P3VybD0ke3VybH1gIDogIiI7CiAgICB9LAogICAgY29weSgpIHsKICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICB0aXRsZTogIlByb2Nlc3NpbmciLAogICAgICAgIG1lc3NhZ2U6ICJHZW5lcmF0aW5nIFN0cmVhbWluZyBMaW5rcyIsCiAgICAgICAgdHlwZTogImluZm8iLAogICAgICB9KQogICAgICB0aGlzLm1haW5Mb2FkID0gdHJ1ZTsKICAgICAgdGhpcy4kYmFja2VuZC5wb3N0KGFwaVJvdXRlcy5tZWRpYVRva2VuVHJhbnNtaXR0ZXIsIHsKICAgICAgICBlbWFpbDogdGhpcy51c2VyLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLnRva2VuLnRva2VuLAogICAgICB9LCBiYWNrZW5kSGVhZGVycyh0aGlzLnRva2VuLnRva2VuKSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5hdXRoICYmIHJlc3BvbnNlLmRhdGEucmVnaXN0ZXJlZCAmJiByZXNwb25zZS5kYXRhLnRva2VuKXsKICAgICAgICAgIGxldCBsaW5rID0gdGhpcy52aWRlb3VybCsiP3BsYXllcj1leHRlcm5hbCIrIiZlbWFpbD0iK3RoaXMudXNlci5lbWFpbCsiJnRva2VuPSIrcmVzcG9uc2UuZGF0YS50b2tlbjsKICAgICAgICAgIHRoaXMubWFpbkxvYWQgPSBmYWxzZTsKICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGxpbmspLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJDb3BpZWQgISEiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICJTdWNjZXNzZnVsbHkgQ29waWVkLiIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KQogICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgIG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJGYWlsZWQiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICJGYWlsZWQgdG8gQ29waWVkIC0gIitlcnIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1haW5Mb2FkID0gZmFsc2U7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB0aGlzLm1haW5Mb2FkID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUV4dGVybmFsUGxheShuYW1lKXsKICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICB0aXRsZTogIlBsYXlpbmcgRXh0ZXJuYWxseSIsCiAgICAgICAgbWVzc2FnZTogIkdlbmVyYXRpbmcgU3RyZWFtaW5nIExpbmsiLAogICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgfSkKICAgICAgdGhpcy5tYWluTG9hZCA9IHRydWU7CiAgICAgIHRoaXMuJGJhY2tlbmQucG9zdChhcGlSb3V0ZXMubWVkaWFUb2tlblRyYW5zbWl0dGVyLCB7CiAgICAgICAgZW1haWw6IHRoaXMudXNlci5lbWFpbCwKICAgICAgICB0b2tlbjogdGhpcy50b2tlbi50b2tlbiwKICAgICAgfSwgYmFja2VuZEhlYWRlcnModGhpcy50b2tlbi50b2tlbikpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuYXV0aCAmJiByZXNwb25zZS5kYXRhLnJlZ2lzdGVyZWQgJiYgcmVzcG9uc2UuZGF0YS50b2tlbil7CiAgICAgICAgICBsZXQgbGluayA9IHRoaXMudmlkZW91cmwrIj9wbGF5ZXI9ZXh0ZXJuYWwiKyImZW1haWw9Iit0aGlzLnVzZXIuZW1haWwrIiZ0b2tlbj0iK3Jlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgICB2YXIgY3VycGxheSA9IHBsYXllcnMobGluaywgdGhpcy52aWRlb25hbWUpLmZpbHRlcigocGxheWVyKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBwbGF5ZXIubmFtZSA9PSBuYW1lOwogICAgICAgICAgfSlbMF07CiAgICAgICAgICB0aGlzLm1haW5Mb2FkID0gZmFsc2U7CiAgICAgICAgICBsb2NhdGlvbi5ocmVmPWN1cnBsYXkuc2NoZW1lCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubWFpbkxvYWQgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIHRoaXMubWFpbkxvYWQgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0pCiAgICB9LAogICAgZG93bmxvYWRCdXR0b24oKSB7CiAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgdGl0bGU6ICJEb3dubG9hZGluZyBOb3ciLAogICAgICAgIG1lc3NhZ2U6ICJHZW5lcmF0aW5nIExpbmtzIGFuZCBEb3dubG9hZGluZyIsCiAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICB9KQogICAgICB0aGlzLm1haW5Mb2FkID0gdHJ1ZTsKICAgICAgdGhpcy4kYmFja2VuZC5wb3N0KGFwaVJvdXRlcy5tZWRpYVRva2VuVHJhbnNtaXR0ZXIsIHsKICAgICAgICBlbWFpbDogdGhpcy51c2VyLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLnRva2VuLnRva2VuLAogICAgICB9LCBiYWNrZW5kSGVhZGVycyh0aGlzLnRva2VuLnRva2VuKSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5hdXRoICYmIHJlc3BvbnNlLmRhdGEucmVnaXN0ZXJlZCAmJiByZXNwb25zZS5kYXRhLnRva2VuKXsKICAgICAgICAgIGxldCBsaW5rID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbitlbmNvZGVVUkkodGhpcy51cmwucmVwbGFjZSgvXlwvKFxkKzopXC8vLCAiLyQxZG93bi8iKSkrIj9wbGF5ZXI9ZG93bmxvYWQiKyImZW1haWw9Iit0aGlzLnVzZXIuZW1haWwrIiZ0b2tlbj0iK3Jlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgICBjb25zb2xlLmxvZyhsaW5rKTsKICAgICAgICAgIHRoaXMubWFpbkxvYWQgPSBmYWxzZTsKICAgICAgICAgIGxvY2F0aW9uLmhyZWY9bGluazsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tYWluTG9hZCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgdGhpcy5tYWluTG9hZCA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfSkKICAgIH0sCiAgICBnZXRDdXJyVmRJbmZvKHJhd0ZpbGVzKXsKICAgICAgcmV0dXJuIHJhd0ZpbGVzLmZpbHRlcihmaWxlID0+IHsKICAgICAgICByZXR1cm4gZmlsZS5uYW1lID09IHRoaXMudXJsLnNwbGl0KCcvJykucG9wKCk7CiAgICAgIH0pCiAgICB9LAogICAgZ2V0VmlkZW91cmwoKSB7CiAgICAgIHRoaXMudmlkZW9uYW1lID0gdGhpcy51cmwuc3BsaXQoJy8nKS5wb3AoKTsKICAgICAgdGhpcy52aWRlb3VybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBlbmNvZGVVUkkodGhpcy51cmwpOwogICAgICB0aGlzLmFwaXVybCA9IHRoaXMudmlkZW91cmwrIj9wbGF5ZXI9aW50ZXJuYWwiKyImZW1haWw9Iit0aGlzLnVzZXIuZW1haWwrIiZ0b2tlbj0iK3RoaXMudG9rZW4udG9rZW47CiAgICB9LAogICAgdGFwUGxheSgpewogICAgICB0aGlzLmluZm9QYW5lbCA9IGZhbHNlOwogICAgICB0aGlzLnBsYXllci5wbGF5KCk7CiAgICB9LAogICAgcGxheU91dHNpZGUobGluayl7CiAgICAgIHRoaXMubW9kYWxWaWRlbyA9IGxpbmsucmVwbGFjZSgiL3dhdGNoP3Y9IiwgIi9lbWJlZC8iKTsKICAgICAgdGhpcy52aWRlb21vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICBnZXRJY29uKHR5cGUpIHsKICAgICAgcmV0dXJuICIjIiArICh0aGlzLmljb25bdHlwZV0gPyB0aGlzLmljb25bdHlwZV0gOiAiaWNvbi13ZWl6aGkiKTsKICAgIH0sCiAgICBnZXRQb3N0ZXIoKSB7CiAgICAgIHZhciBkYXRhID0gdGhpcy5vcmlnaW5hbEZpbGVzLmZpbHRlcigoZmlsZSkgPT4gewogICAgICAgIHJldHVybiBmaWxlLm5hbWUgPT0gdGhpcy52aWRlb25hbWUKICAgICAgfSlbMF0udGh1bWJuYWlsTGluazsKICAgICAgdGhpcy5wb3N0ZXIgPSBkYXRhOwogICAgfSwKICAgIHN3aXBlTGVmdChmdW5jKSB7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSAidGhpcy4kcmVmcy4iK2Z1bmM7CiAgICAgIHNjcm9sbFRvKGV2YWwoY29udGVudCksIC0zMDAsIDQwMCk7CiAgICB9LAogICAgc3dpcGVSaWdodChmdW5jKSB7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSAidGhpcy4kcmVmcy4iK2Z1bmM7CiAgICAgIHNjcm9sbFRvKGV2YWwoY29udGVudCksIDMwMCwgNDAwKTsKICAgIH0sCiAgICBhY3Rpb24oZmlsZSwgdGFyZ2V0KSB7CiAgICAgIGxldCBwYXRoID0gZmlsZS5wYXRoOwogICAgICBpZiAodGFyZ2V0ID09PSAidmlldyIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiBjaGVja1ZpZXcocGF0aCksCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgZ2V0RmlsdGVyZWRGaWxlcyhyYXdGaWxlcykgewogICAgICBjb25zdCB2aWRlb1JlZ2V4ID0gLyh2aWRlbylcLyguKykvCiAgICAgIHJldHVybiByYXdGaWxlcy5maWx0ZXIoZmlsZSA9PiB7CiAgICAgICAgcmV0dXJuIGZpbGUubmFtZSAhPSB0aGlzLnVybC5zcGxpdCgnLycpLnBvcCgpOwogICAgICB9KS5maWx0ZXIoZmlsZSA9PiB7CiAgICAgICAgcmV0dXJuIHZpZGVvUmVnZXgudGVzdChmaWxlLm1pbWVUeXBlKTsKICAgICAgfSk7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNpdGVOYW1lKCkgewogICAgICByZXR1cm4gd2luZG93Lmdkcy5maWx0ZXIoKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgcmV0dXJuIGluZGV4ID09IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgfSlbMF07CiAgICB9LAogICAgdXJsKCkgewogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLnBhdGgpIHsKICAgICAgICByZXR1cm4gZGVjb2RlNjQodGhpcy4kcm91dGUucGFyYW1zLnBhdGgpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICAuLi5tYXBTdGF0ZSgiYWNyb3UvdmlldyIsIFsibW9kZSJdKSwKICAgIHBsYXllcnMoKSB7CiAgICAgIHJldHVybiBwbGF5ZXJzKCkubWFwKChwbGF5ZXIpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbmFtZTogcGxheWVyLm5hbWUsCiAgICAgICAgICBpY29uOiBwbGF5ZXIuaWNvbgogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgaWYodGhpcy4kYXVkaW8ucGxheWVyKCkgIT0gdW5kZWZpbmVkKSB0aGlzLiRhdWRpby5kZXN0cm95KCk7CiAgICBpZih3aW5kb3cudGhlbWVPcHRpb25zLmxvYWRpbmdfaW1hZ2UpewogICAgICB0aGlzLmxvYWRJbWFnZSA9IHdpbmRvdy50aGVtZU9wdGlvbnMubG9hZGluZ19pbWFnZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9hZEltYWdlID0gImh0dHBzOi8vaS5pYmIuY28vYnNxSFcydy9MYW1wbGlnaHQtTW9iaWxlLmdpZiIKICAgIH0KICAgIHRoaXMucmVuZGVyKCk7CiAgfSwKICBjcmVhdGVkKCkgewogICAgbGV0IGdkZGF0YSA9IGdldGdkcyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgdGhpcy5nZHMgPSBnZGRhdGEuZ2RzOwogICAgdGhpcy5jdXJyZ2QgPSBnZGRhdGEuY3VycmVudDsKICB9LAogIHdhdGNoOiB7CiAgICBzZWFyY2hCYXJUZXJtOiBmdW5jdGlvbigpIHsKICAgICAgaWYodGhpcy5zZWFyY2hCYXJUZXJtLmxlbmd0aCA+IDApewogICAgICAgIGNvbnN0IHNlYXJjaFJlZ2V4ID0gbmV3IFJlZ0V4cCh0aGlzLnNlYXJjaEJhclRlcm0udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgdGhpcy5maWxlcyA9IHRoaXMuZ2V0RmlsdGVyZWRGaWxlcyh0aGlzLm9yaWdpbmFsRmlsZXMuZmlsdGVyKChmaWxlKSA9PiB7CiAgICAgICAgICByZXR1cm4gc2VhcmNoUmVnZXgudGVzdChmaWxlLm5hbWUudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgfSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmlsZXMgPSB0aGlzLmdldEZpbHRlcmVkRmlsZXModGhpcy5vcmlnaW5hbEZpbGVzKTsKICAgICAgfQogICAgfSwKICAgIHNjcmVlbldpZHRoOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIHdpZHRoID0gdGhpcy53aW5kb3dXaWR0aCA+IDAgPyB0aGlzLndpbmRvd1dpZHRoIDogdGhpcy5zY3JlZW5XaWR0aDsKICAgICAgaWYod2lkdGggPiA5NjYpewogICAgICAgIHRoaXMuaXNtb2JpbGUgPSBmYWxzZQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNtb2JpbGUgPSB0cnVlCiAgICAgIH0KICAgIH0sCiAgICB3aW5kb3dXaWR0aDogZnVuY3Rpb24oKSB7CiAgICAgIHZhciB3aWR0aCA9IHRoaXMud2luZG93V2lkdGggPiAwID8gdGhpcy53aW5kb3dXaWR0aCA6IHRoaXMuc2NyZWVuV2lkdGg7CiAgICAgIGlmKHdpZHRoID4gOTY2KXsKICAgICAgICB0aGlzLmlzbW9iaWxlID0gZmFsc2UKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzbW9iaWxlID0gdHJ1ZQogICAgICB9CiAgICB9LAogICAgcGxheWVyOiBmdW5jdGlvbigpewogICAgICB0aGlzLnBsYXllci5vbigncmVhZHknLCAoKSA9PiB7CiAgICAgICAgdGhpcy5wbGF5aWNvbj0iZmFzIGZhLWdsYXNzZXMiOwogICAgICAgIHRoaXMucGxheXRleHQ9IkxldCdzIFBhcnR5IgogICAgICB9KTsKICAgICAgdGhpcy5wbGF5ZXIub24oJ3BsYXlpbmcnLCAoKSA9PiB7CiAgICAgICAgdGhpcy5wbGF5aWNvbj0iZmFzIGZhLXNwaW4gZmEtY29tcGFjdC1kaXNjIjsKICAgICAgICB0aGlzLm1ldGF0aXRsZSA9ICJQbGF5aW5nIisiLSIrZGVjb2RlVVJJQ29tcG9uZW50KHRoaXMudXJsLnNwbGl0KCcvJykucG9wKCkuc3BsaXQoJy4nKS5zbGljZSgwLC0xKS5qb2luKCcuJykpOwogICAgICAgIHRoaXMucGxheXRleHQ9IlBsYXlpbmciCiAgICAgIH0pOwogICAgICB0aGlzLnBsYXllci5vbigncGF1c2UnLCAoKSA9PiB7CiAgICAgICAgdGhpcy5wbGF5aWNvbj0iZmFzIGZhLXBhdXNlIjsKICAgICAgICB0aGlzLm1ldGF0aXRsZSA9ICJQYXVzZWQiKyItIitkZWNvZGVVUklDb21wb25lbnQodGhpcy51cmwuc3BsaXQoJy8nKS5wb3AoKS5zcGxpdCgnLicpLnNsaWNlKDAsLTEpLmpvaW4oJy4nKSk7CiAgICAgICAgdGhpcy5wbGF5dGV4dD0iUGF1c2VkIgogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},null]}